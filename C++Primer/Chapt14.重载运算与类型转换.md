# 第十四章：重载运算与类型转换  



---  

* 重载的运算符是具有特殊名字的函数： `operator` 加上要重载的运算符。  
* 一元运算符有一个参数，二元运算符有两个参数。运算符左侧对象传递给第一个参数，运算符右侧对象传递给第二个参数。  
* 如果运算符是成员函数， this 绑定到左侧运算符对象。因此成员函数的显式参数数量比运算对象少一个。  
* 运算符定义为成员还是非成员函数参考准则：
  * 赋值（ `=` ），下标（ `[ ]` ），调用（ `( )` ）和成员访问箭头（ `->` ）运算符必须是成员。  
  * 复合赋值运算符一般来说应该是成员。  
  * 改变对象状态或者给定类型密切相关的运算符，如递增、递减和解引用运算符通常是成员。  
  * 具有对称性的运算符可能转换任意一端的运算对象，通常应该是普通的非成员函数。  
* 下标运算符，最好同时定义常量版本与非常量版本，确保常量对象下标运算符可以返回常量引用。  
* 递增、递减运算符，分为前置版本和后置版本，后置版本使用一个额外不使用的 int 类型形参来区分。  
  ```c++
  class Foo
  {
  public:
      Foo();
      Foo& operator++() { ++n; return *this; } // 前置
      Foo& operator--() { --n; return *this; } // 前置
      Foo operator++(int) // 后置
      {
          Foo ret = *this;  // 记录当前值
          ++*this;
          return ret;
      }
      Foo operator--(int); // 后置
      {
          Foo ret = *this; // 记录当前值
          --*this;
          return ret;
      }
  private:
      int n = 0;
  }
  ```






































